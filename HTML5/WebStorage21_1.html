<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebStorage21_1.html</title>
</head>
<body>





    <fieldset>
        
        <legend>웹 스토리지를 이용한 방문자 회원수 카운팅</legend>
        
        <span id="display" style="color : red; font-size : 1.2em; font-weight : bold"></span>

        <button onclick = "removeStorage();">로컬 스토리지 삭제</button>

        <script>
            //브라우저의 웹 스토리지 지원여부 판단]
            console.log(typeof(Storage) != undefined); //true가 나오면 지원하는 브라우저 
            var span;

            if(typeof(Storage) != undefined){ //웹스토리지를 제공하는 브라우저일때
                //span객체 얻기
                span = document.getElementById('display');
                span.innerHTML = '웹 스토리지를 지원하는 브라우저 입니다';
                console.log('자료형 : %s , localStorage : %s , ',typeof(localStorage),localStorage);
                //localStorage의 자료형 : object

                //로컬 스토리지에 저장한 방문 횟수 읽기
                var counter = localStorage.getItem('counter');

                console.log('counter : %s',counter);

                if(counter == null){
                    //방문횟수 1로 초기화
                    localStorage.setItem('counter',1);
                    span.innerHTML = '처음 방문 하셨군요';
                }
                else{
                    counter++; //밑에다가 인자로 counter+1로 쓰면 큰일남 
                    localStorage.setItem('counter',counter);
                    span.innerHTML = counter+'번째 방문';
                }

                //브라우저마다 스토리지 저장공간이 다르기때문에 브라우저마다 방문횟수가 다름 @@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@

            }

            function removeStorage(){
                span.innerHTML='방문 횟수가 초기화 되었어요';
                localStorage.removeItem('counter'); 
            }


        </script>



    </fieldset>
    
</body>
</html>